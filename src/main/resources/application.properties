# 1. INFORMAÇÕES BÁSICAS DA APLICAÇÃO
spring.application.name=sma-backend
server.port=8080

# Define o fuso horário padrão da JVM como UTC. Essencial para consistência de datas (OffsetDateTime).
spring.jackson.time-zone=UTC

# =========================================
# 2. BANCO DE DADOS (POSTGRESQL + HIKARI CP)
# =========================================
# Substitua com seus valores de produção
spring.datasource.url=jdbc:postgresql://localhost:5432/sma_db
spring.datasource.username=sma_user
spring.datasource.password=sma_pass
spring.datasource.driver-class-name=org.postgresql.Driver

# Configurações do Pool de Conexões (Hikari)
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.minimum-idle=5

# 30 segundos
spring.datasource.hikari.connection-timeout=30000

# 10 minutos
spring.datasource.hikari.idle-timeout=600000

# 30 minutos
spring.datasource.hikari.max-lifetime=1800000

# =========================================
# 3. JPA E HIBERNATE (COM DIALETO POSTGIS)
# =========================================
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect

# IMPORTANTE: Este é o dialeto específico que habilita as funções do PostGIS (ST_Distance, etc)
spring.jpa.properties.hibernate.dialect=org.hibernate.spatial.dialect.postgresql.PostgisDialect

# AVISO: Use 'validate' ou 'none' em produção.
# 'update': Atualiza o schema (bom para dev)
# 'create-drop': Recria o banco a cada reinício (bom para testes)
# 'validate': Valida se o schema corresponde às entidades
# 'none': Desliga o DDL (produção)
spring.jpa.hibernate.ddl-auto=update

# Força o Hibernate a usar UTC ao interagir com o JDBC (CRÍTICO para OffsetDateTime)
spring.jpa.properties.hibernate.jdbc.time_zone=UTC

# =LED-SQL (Alternativa ao 'show-sql=true' para logs mais limpos)
# Para ver os SQLs formatados e os parâmetros (?), use os níveis de log abaixo

# =========================================
# 4. LOGGING
# =========================================
logging.level.root=INFO
# Habilite para ver logs detalhados da SUA aplicação
logging.level.com.monitoramento=DEBUG

# Habilite as duas linhas abaixo para ver os SQLs e seus parâmetros durante o desenvolvimento
# logging.level.org.hibernate.SQL=DEBUG
# logging.level.org.hibernate.type.descriptor.sql=TRACE

# =========================================
# 5. SEGURANÇA (JWT) - Externalize em produção!
# =========================================
# AVISO: NUNCA use segredos no código. Use Variáveis de Ambiente ou Spring Cloud Config.
# (Ex: jwt.secret=${JWT_SECRET_ENV_VAR})
jwt.secret=Chasd123oj123mpo213mkasndsam,ndsjkop13j21das0987g0iqj90dmvn167413b86321098b6v90610

# 24 horas
jwt.expiration-ms=86400000

# =========================================
# 6. MENSAGERIA (RABBITMQ - Para Ingestão Assíncrona)
# =========================================
# Descomente se for usar a ingestão assíncrona
# spring.rabbitmq.host=localhost
# spring.rabbitmq.port=5672
# spring.rabbitmq.username=guest
# spring.rabbitmq.password=guest
# Ativa listeners (consumidores)
# spring.rabbitmq.listener.simple.auto-startup=true

# =========================================
# 7. MONITORAMENTO (SPRING BOOT ACTUATOR)
# =========================================
# Expõe os endpoints de saúde e métricas
management.endpoints.web.exposure.include=health,info,prometheus,metrics
management.endpoint.health.show-details=always
management.health.db.enabled=true
management.health.diskspace.enabled=true